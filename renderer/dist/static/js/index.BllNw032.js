import{r as e,c as a,n as l,t as i,ab as s,a0 as t,a1 as n,a2 as o,a6 as d,E as u,a7 as r,av as c,M as v,aG as p,a8 as w,B as b,a3 as m,ad as h,a4 as y}from"./vendor-core.C0Lh0Bwd.js";import{_ as f}from"./index.d8tdxoVV.js";import"./vendor-pdf-lib.BXU7dqtn.js";import"./vendor-chart.NpQzHG3K.js";import"./vendor-utils.GQMQj4-C.js";import"./vendor-ui.DGEqNazO.js";import"./vendor-calendar.Dr9D_D2E.js";import"./vendor-office.DzQU5JIL.js";import"./vendor-pdf-dist.DMQtNH0k.js";import"./vendor-excel.zAN2rvz7.js";import"./vendor-code-editor.DyVN5M6D.js";import"./vendor-editor.DQiCmevo.js";import"./vue3-lib.32gCSs7p.js";import"./vendor-docx.oM3BbWsc.js";const g={class:"embedded-web-viewer"},x={class:"controls"},V={class:"input-group"},j={class:"input-group"},k={class:"input-group"},A=["disabled"],C={class:"viewer-container"},z={key:0,class:"placeholder-content"},U=["src"],W={key:0,class:"viewer-info"},_={class:"info-item"},B={class:"info-item"},M={class:"info-item"},R={class:"info-item"},L={class:"info-item"},D={class:"info-item"},E={key:1,class:"resize-controls"},I={class:"resize-inputs"},G={class:"resize-input"},K={class:"resize-input"},T=f({__name:"index",setup(f){const T=e("https://www.google.com"),$=e(""),q=e(!1),F=e(!1),H=e(!1),J=e(null),N=e(),O=e(800),P=e(600),Q=async()=>{if(T.value.trim()&&N.value){F.value=!0;try{const e=N.value.getBoundingClientRect(),a=await window.embeddedWebViewerApi.create({url:T.value.trim(),title:$.value.trim()||void 0,enableDevTools:q.value,bounds:{x:Math.round(e.left),y:Math.round(e.top),width:O.value,height:P.value}});a.success&&a.viewerId?(await S(),H.value=!0):alert(`创建失败: ${a.error}`)}catch(e){alert("创建嵌入式查看器时发生错误")}finally{F.value=!1}}},S=async()=>{try{const e=await window.embeddedWebViewerApi.getAll();e.success&&e.viewers.length>0&&(J.value=e.viewers[0])}catch(e){}},X=async()=>{if(J.value)try{(await window.embeddedWebViewerApi.hide(J.value.id)).success&&await S()}catch(e){}},Y=async()=>{if(J.value)try{(await window.embeddedWebViewerApi.show(J.value.id)).success&&await S()}catch(e){}},Z=async()=>{if(J.value)try{(await window.embeddedWebViewerApi.close(J.value.id)).success&&(J.value=null,H.value=!1)}catch(e){}},ee=async()=>{if(J.value&&N.value)try{const e=N.value.getBoundingClientRect();(await window.embeddedWebViewerApi.updateBounds(J.value.id,{x:Math.round(e.left),y:Math.round(e.top),width:O.value,height:P.value})).success&&await S()}catch(e){}},ae=()=>{H.value&&ee()};return a((async()=>{window.addEventListener("resize",ae),await l(),N.value&&N.value.getBoundingClientRect()})),i((()=>{window.removeEventListener("resize",ae),H.value&&window.embeddedWebViewerApi.closeAll()})),(e,a)=>{const l=s("webview");return n(),t("div",g,[o("div",x,[o("div",V,[a[5]||(a[5]=o("label",null,"URL:",-1)),u(o("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>T.value=e),type:"url",placeholder:"https://www.example.com",onKeyup:c(Q,["enter"])},null,544),[[r,T.value]])]),o("div",j,[a[6]||(a[6]=o("label",null,"标题:",-1)),u(o("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>$.value=e),type:"text",placeholder:"自定义标题"},null,512),[[r,$.value]])]),o("div",k,[o("label",null,[u(o("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>q.value=e),type:"checkbox"},null,512),[[p,q.value]]),a[7]||(a[7]=v(" 启用开发者工具 "))])]),o("button",{onClick:Q,disabled:F.value||!T.value.trim(),class:"create-btn"},w(F.value?"创建中...":"创建嵌入式查看器"),9,A)]),o("div",C,[o("div",{ref_key:"viewerDiv",ref:N,class:"viewer-placeholder",style:m({width:O.value+"px",height:P.value+"px",border:H.value?"none":"2px dashed #ccc"})},[H.value?d("",!0):(n(),t("div",z,a[8]||(a[8]=[o("div",{class:"placeholder-icon"},"🌐",-1),o("div",{class:"placeholder-text"},"点击上方按钮创建嵌入式网页查看器",-1),o("div",{class:"placeholder-hint"},"网页将显示在这个区域内",-1)])))],4),b(l,{id:"foo",src:T.value,style:{width:"400px",height:"480px"}},{default:h((()=>a[9]||(a[9]=[o("div",{class:"indicator"},null,-1)]))),_:1},8,["src"]),o("iframe",{src:T.value,frameborder:"0",width:"100%",height:"600px",sandbox:"allow-same-origin allow-scripts allow-popups allow-forms",referrerpolicy:"no-referrer",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",loading:"lazy"},null,8,U)]),J.value?(n(),t("div",W,[a[16]||(a[16]=o("h4",null,"当前查看器信息",-1)),o("div",_,[a[10]||(a[10]=o("strong",null,"ID:",-1)),v(" "+w(J.value.id),1)]),o("div",B,[a[11]||(a[11]=o("strong",null,"URL:",-1)),v(" "+w(J.value.url),1)]),o("div",M,[a[12]||(a[12]=o("strong",null,"标题:",-1)),v(" "+w(J.value.title),1)]),o("div",R,[a[13]||(a[13]=o("strong",null,"状态:",-1)),o("span",{class:y({"status-visible":J.value.isVisible,"status-hidden":!J.value.isVisible})},w(J.value.isVisible?"可见":"隐藏"),3)]),o("div",L,[a[14]||(a[14]=o("strong",null,"位置:",-1)),v(" x: "+w(J.value.bounds.x)+", y: "+w(J.value.bounds.y),1)]),o("div",D,[a[15]||(a[15]=o("strong",null,"尺寸:",-1)),v(" "+w(J.value.bounds.width)+" × "+w(J.value.bounds.height),1)]),o("div",{class:"action-buttons"},[o("button",{onClick:X,class:"action-btn hide-btn"},"隐藏"),o("button",{onClick:Y,class:"action-btn show-btn"},"显示"),o("button",{onClick:Z,class:"action-btn close-btn"},"关闭")])])):d("",!0),H.value?(n(),t("div",E,[a[19]||(a[19]=o("h4",null,"调整尺寸",-1)),o("div",I,[o("div",G,[a[17]||(a[17]=o("label",null,"宽度:",-1)),u(o("input",{"onUpdate:modelValue":a[3]||(a[3]=e=>O.value=e),type:"number",min:"200",max:"1200",onChange:ee},null,544),[[r,O.value,void 0,{number:!0}]])]),o("div",K,[a[18]||(a[18]=o("label",null,"高度:",-1)),u(o("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>P.value=e),type:"number",min:"200",max:"800",onChange:ee},null,544),[[r,P.value,void 0,{number:!0}]])])])])):d("",!0)])}}},[["__scopeId","data-v-ebeab75b"]]);export{T as default};
