import{_ as e,u as a,$ as s}from"./index.ByAAvK4v.js";import{aw as r,r as t,a0 as l,a1 as o,a2 as i,B as c,ad as d,M as n}from"./vendor-core.C0Lh0Bwd.js";import{v as u,F as m,b as v,I as p,B as g,T as f,g as b}from"./vendor-ui.DGEqNazO.js";import"./vendor-pdf-lib.BXU7dqtn.js";import"./vendor-chart.NpQzHG3K.js";import"./vendor-utils.GQMQj4-C.js";import"./vendor-calendar.Dr9D_D2E.js";import"./vendor-office.DzQU5JIL.js";import"./vendor-pdf-dist.DMQtNH0k.js";import"./vendor-excel.zAN2rvz7.js";import"./vendor-code-editor.DyVN5M6D.js";import"./vendor-editor.DQiCmevo.js";import"./vue3-lib.32gCSs7p.js";import"./vendor-docx.oM3BbWsc.js";const h=""+new URL("../background.CgC11ewG.svg",import.meta.url).href,_=""+new URL("../qrcode.T4XYoKD9.jpg",import.meta.url).href,j={class:"login"},y={class:"login-container"},k={class:"login-box"},q=e({__name:"index",setup(e){const q=r(),z=a(),N=t(null),w=t("qrcode"),x=t({userName:"",phone:"",email:"",license:""}),A={userName:[{required:!0,message:"请输入邮箱或手机号",trigger:"blur"},{validator:(e,a)=>{if(!a)return Promise.resolve();return/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(a)||/^1[3-9]\d{9}$/.test(a)?Promise.resolve():Promise.reject("请输入正确的邮箱或手机号格式")},trigger:"blur"}],license:[{required:!0,message:"请输入邀请码",trigger:"blur"},{min:36,message:"邀请码长度为36位",trigger:"blur"}]},U=async()=>{try{await N.value.validate();const e=/^1[3-9]\d{9}$/;/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(x.value.userName)?(x.value.email=x.value.userName,x.value.phone=""):e.test(x.value.userName)&&(x.value.phone=x.value.userName,x.value.email="");const a=await s.post("/login",x.value);a.data&&(z.setUserInfo(a.data),z.setSpaceInfo(a.data.spaceList[0]),b.success("登录成功！"),q.push("/home"))}catch(e){}};return(e,a)=>{const s=u,r=p,t=v,b=g,q=m,z=f;return o(),l("div",j,[a[8]||(a[8]=i("div",{class:"background-decoration"},[i("img",{src:h})],-1)),i("div",y,[i("div",k,[a[6]||(a[6]=i("h1",{class:"title"},"欢迎参与Rebirth内测",-1)),a[7]||(a[7]=i("p",{class:"subtitle"},"让学习更高效，让创意更自由",-1)),c(z,{activeKey:w.value,"onUpdate:activeKey":a[2]||(a[2]=e=>w.value=e),class:"login-tabs"},{default:d((()=>[c(s,{key:"qrcode",tab:"获取邀请码"},{default:d((()=>a[3]||(a[3]=[i("div",{class:"qrcode-section"},[i("div",{class:"qrcode-wrapper"},[i("img",{src:_,alt:"公众号二维码",class:"qrcode-img"})]),i("p",{class:"qrcode-tip"},"关注公众号获取邀请码"),i("p",{class:"qrcode-desc"},'关注后若未收到邀请码，可发送"邀请码"获取'),i("a",{href:"https://gitee.com/robotchange/rebirthnote-feedback/issues/IC4RG3",target:"_blank"}," 问题反馈 "),i("a",{style:{color:"red","margin-left":"30px"},href:"https://official.rebirthnote.com/website/#test",target:"_blank"}," 内测声明 ")],-1)]))),_:1}),c(s,{key:"login",tab:"邀请码登录"},{default:d((()=>[c(q,{model:x.value,rules:A,ref_key:"loginFormRef",ref:N,class:"login-form"},{default:d((()=>[c(t,{name:"userName"},{default:d((()=>[c(r,{value:x.value.userName,"onUpdate:value":a[0]||(a[0]=e=>x.value.userName=e),placeholder:"请输入邮箱/手机号",size:"large"},null,8,["value"])])),_:1}),c(t,{name:"license"},{default:d((()=>[c(r,{value:x.value.license,"onUpdate:value":a[1]||(a[1]=e=>x.value.license=e),placeholder:"请输入邀请码",size:"large"},null,8,["value"])])),_:1}),c(b,{type:"primary",block:"",size:"large",onClick:U},{default:d((()=>a[4]||(a[4]=[n("登录")]))),_:1}),a[5]||(a[5]=i("p",{class:"login-tip"}," 注意：登录后邀请码将与您输入的邮箱或电话号码进行绑定，请输入正确的邮箱与手机号! ",-1))])),_:1},8,["model"])])),_:1})])),_:1},8,["activeKey"])])])])}}},[["__scopeId","data-v-fc257702"]]);export{q as default};
